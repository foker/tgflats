# ===========================
# Database Configuration
# ===========================
DATABASE_URL="postgresql://user:password@localhost:5432/tbi_prop?schema=public"

# ===========================
# Redis Configuration
# ===========================
REDIS_HOST=localhost
REDIS_PORT=6379
# Alternative: Use REDIS_URL for full connection string
# REDIS_URL=redis://localhost:6379

# ===========================
# Telegram Parsing (Apify)
# ===========================
# Get credentials from https://console.apify.com/account/integrations
APIFY_USER_ID=YOUR_APIFY_USER_ID_HERE
APIFY_SECRET=YOUR_APIFY_API_TOKEN_HERE
APIFY_ACTOR_ID=CIHG1VRwmC01rsPar
# Rate limiting for Apify requests (requests per minute)
APIFY_RATE_LIMIT=10
# Max retries for failed Apify requests
APIFY_MAX_RETRIES=3

# ===========================
# AI Analysis
# ===========================
# OpenAI Configuration
# Get key from https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-YOUR_OPENAI_API_KEY_HERE
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_MAX_TOKENS=2000
OPENAI_TEMPERATURE=0.3

# OpenRouter Configuration (DeepSeek fallback)
# Get key from https://openrouter.ai/keys
OPENROUTER_API_KEY=sk-or-v1-YOUR_OPENROUTER_KEY_HERE
OPENROUTER_MODEL=deepseek/deepseek-chat
OPENROUTER_SITE_URL=https://tbi-prop.com
OPENROUTER_APP_NAME=TBI-Prop

# AI Cost Tracking
AI_MONTHLY_SPENDING_LIMIT=100
AI_COST_WARNING_THRESHOLD=80
AI_ENABLE_FALLBACK=true

# ===========================
# Geocoding Services
# ===========================
# Google Maps API
# Get key from https://console.cloud.google.com/apis/credentials
GOOGLE_MAPS_API_KEY=AIza_YOUR_GOOGLE_MAPS_KEY_HERE
GOOGLE_MAPS_REGION=ge
GOOGLE_MAPS_LANGUAGE=en

# OpenCage Geocoding (Fallback)
# Get key from https://opencagedata.com/api
OPENCAGE_API_KEY=YOUR_OPENCAGE_API_KEY_HERE
OPENCAGE_RATE_LIMIT=5

# Geocoding Cache Settings
GEOCODING_CACHE_TTL=2592000  # 30 days in seconds
GEOCODING_CONFIDENCE_THRESHOLD=0.7

# ===========================
# Telegram Channels to Parse
# ===========================
# Comma-separated list of Telegram channels (without @)
TELEGRAM_CHANNELS=kvartiry_v_tbilisi,propertyintbilisi,GeorgiaRealEstateGroup

# Parsing Schedule (cron expressions)
PARSING_SCHEDULE_REGULAR="0 */12 * * *"  # Every 12 hours
PARSING_SCHEDULE_INITIAL="0 0 * * 0"     # Weekly full sync on Sunday
PARSING_BATCH_SIZE=20
PARSING_INITIAL_LIMIT=100

# ===========================
# Queue Configuration
# ===========================
QUEUE_CONCURRENCY=5
QUEUE_MAX_RETRIES=3
QUEUE_RETRY_DELAY=5000  # milliseconds
QUEUE_REMOVE_ON_COMPLETE=100  # Keep last 100 completed jobs
QUEUE_REMOVE_ON_FAIL=500      # Keep last 500 failed jobs

# ===========================
# Application Settings
# ===========================
PORT=3001
NODE_ENV=development
APP_NAME=TBI-Prop
APP_VERSION=1.0.0

# ===========================
# Security & CORS
# ===========================
CORS_ORIGINS=http://localhost:3000,http://localhost:3001,http://localhost:5173
CORS_CREDENTIALS=true

# Rate Limiting
THROTTLE_TTL=60000      # Time window in ms
THROTTLE_LIMIT=100      # Max requests per window

# ===========================
# Logging & Monitoring
# ===========================
LOG_LEVEL=debug  # debug | info | warn | error
LOG_FORMAT=json  # json | simple
ENABLE_REQUEST_LOGGING=true
ENABLE_PERFORMANCE_MONITORING=true

# ===========================
# WebSocket Configuration
# ===========================
WS_PORT=3001  # Same as main app port
WS_CORS_ORIGINS=http://localhost:3000,http://localhost:5173
WS_PING_INTERVAL=30000  # 30 seconds

# ===========================
# Admin Dashboard
# ===========================
ADMIN_USERNAME=admin
ADMIN_PASSWORD=CHANGE_THIS_PASSWORD_IN_PRODUCTION
ADMIN_JWT_SECRET=YOUR_SUPER_SECRET_JWT_KEY_HERE
ADMIN_JWT_EXPIRES_IN=24h

# ===========================
# External Services (Optional)
# ===========================
# Telegram Bot (for notifications)
TELEGRAM_BOT_TOKEN=YOUR_TELEGRAM_BOT_TOKEN_HERE
TELEGRAM_ADMIN_CHAT_ID=YOUR_ADMIN_CHAT_ID

# Sentry (Error Tracking)
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# ===========================
# Feature Flags
# ===========================
ENABLE_MOCK_DATA=true  # Use mock data when API keys are missing
ENABLE_AI_ANALYSIS=true
ENABLE_GEOCODING=true
ENABLE_AUTO_PARSING=false  # Enable scheduled parsing
ENABLE_WEBSOCKET=true
ENABLE_ADMIN_DASHBOARD=true